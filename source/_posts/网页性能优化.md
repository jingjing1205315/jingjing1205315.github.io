---
title: 网页性能优化
date: 2020-11-01 00:00:00
tags: 
---
页面速度和访客的滞留时间，跳出率以及收入都有直接的关系。
小于2秒的页载入时间被认为是优良的，而且高达4秒是可接受的。而大于5秒的页面载入时间不仅影响你网站的搜索引擎排名，还会严重影响用户体验。
网页性能优化分为很多维度，在各个维度我们需要做什么？
<!--more-->

### 一、网络
1、减少DNS
域名解析的时候页面是没有任何反应的，需要解析的域名越多，页面加载时长会越长。

2、减少请求
1）css sprite
2）小图片转为base64
3）使用浏览器缓存

3、优化TCP协议
1）TCP连接复用，使用keep-alive：连接回复加上请求头：keep-alive。第一次请求不断开，第二次请求复用。
2）使用http 2.0版本：多路复用，连接复用率会更高

4、同时发送多个请求（浏览器自带）IE8可以同时请求下载4个的css文件，Chrome可以同时请求下载8个 。

5、减小cookie体积，每个请求都会附带cookie，所以不要滥用cookie。


### 二、服务器
1、使用CDN
2、接口keep-alive
3、最小化重定向
4、Accept-Encoding: gzip, deflate

### 三、渲染
1、减少回流和重绘

2、懒加载、预加载



### 四、图片
1、选择正确的格式。
1）最适合网页的格式是webp
2）色彩多适宜用jpg
3）半透明、透明图片适宜用png
4）动图适宜用gif
2、选择合适的尺寸
2、压缩图片
有很多工具可以压缩图片，压缩的程度需与视觉效果做权衡
3、能用文字代替最好用文字

### 五、js
1、压缩js
去掉注释、空格等多余的行，减少js的大小；
长变量名用简单的字母代替，使用压缩工具可以实现

2、减少不必要的引用
一个文件只需要引用一次

3、去掉不必要的插件

4、Ajax的get可缓存

5、减少监听器，使用事件委托

6、减少或合并DOM操作或使用虚拟DOM

7、对大量数据计算使用缓存

```
for(var i = 0,len = data.length;i < len;i++){
     // do something...
   }
```

### 六、html
1、减少嵌套层级

2、css放在head中，js放在最后

### 七、css
1、避免CSS表达式
2、压缩
3、精简（合并相同的属性、删除不用的class）

### 八、优化用户体验
用户看到哪些内容就请求哪些内容
加一个loading动画用户会感觉时间变快







参考文章：
[10种优化页面加载速度的方法](https://www.diybloghome.com/frontlogy/1036.html)
[Web前端性能优化——如何提高页面加载速度](https://www.cnblogs.com/yzhihao/p/9385467.html)
[web前端性能优化——如何提高页面加载速度](https://zhuanlan.zhihu.com/p/59681837)
    

